// The 'gameKeys' object contains a list of games and their respective keys.

const gameKeys = {
    "Counter Strike: Global Offensive": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],
    
    "Dota 2": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],

    "Apex Legends": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],

    "PUBG: BATTLEGROUNDS": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],

    "Grand Theft Auto V": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],

    "Rust": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],

    "Team Fortress 2": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],

    "Call of Duty: Modern Warfare II": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],

    "Destiny 2": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],

    "War Thunder": [
        "A1B2C-D3E4F-G5H6I", "X4Y5Z-6A7B8-9C0D1", "E2F3G-H4I5J-K6L7M",
        "N8O9P-Q1R2S-T3U4V", "W5X6Y-7Z8A9-0B1C2", "D3E4F-G5H6I-J7K8L",
        "M9N0O-P1Q2R-S3T4U", "V5W6X-7Y8Z9-0A1B2", "C3D4E-F5G6H-I7J8K",
        "L9M0N-O1P2Q-R3S4T"
    ],
};

// Counter to keep track of how many games a user has claimed.
let claimCounter = 0;

// Constant defining the maximum number of claims a user can make.
const maxClaims = 5;

// A DOM element reference to display the number of remaining claims.
const claimsRemainingElement = document.querySelector("#claims-remaining span");

// Function to update the displayed number of remaining claims.
function updateClaimsRemaining() {
    // Calculate and update the text content with the number of claims left.
    claimsRemainingElement.textContent = maxClaims - claimCounter;
}

// Event listener to run once the DOM content is fully loaded.
document.addEventListener('DOMContentLoaded', () => {
    // Get all the buttons associated with the games.
    const buttons = document.querySelectorAll('.game button');

    // Add a click event listener to each button.
    buttons.forEach(button => {
        button.addEventListener('click', function() {
            // If the user has reached the max number of claims, alert them and exit.
            if (claimCounter >= maxClaims) {
                alert("You have already claimed 5 games!");
                return;
            }

            // Retrieve the game's name from the button's 'data-game' attribute.
            const gameName = this.getAttribute('data-game');

            // Check if there are keys available for the selected game.
            if (gameKeys[gameName].length > 0) {
                // Get a random index to select a key.
                const randomIndex = Math.floor(Math.random() * gameKeys[gameName].length);
                
                // Take the key out from the array using the random index and get the first element from the resulting array.
                const key = gameKeys[gameName].splice(randomIndex, 1)[0];
                
                // Notify the user with the claimed game and its key.
                alert(`You claimed ${gameName}!\nKey: ${key}`);
                
                // Increment the claim counter.
                claimCounter++;

                // Update the displayed number of claims remaining.
                updateClaimsRemaining();
            } else {
                // If no keys are left for the game, alert the user.
                alert(`Sorry, all keys for ${gameName} have been claimed.`);
            }
        });
    });

    // Initialize the displayed number of remaining claims when the page first loads.
    updateClaimsRemaining();
});